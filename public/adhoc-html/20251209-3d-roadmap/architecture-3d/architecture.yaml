# AWS 3Dæ§‹æˆå›³ å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«
name: "Sprint1 Architecture"
description: "åŸºæœ¬çš„ãªWeb2å±¤æ§‹æˆï¼ˆALB + EC2ï¼‰"

# VPCå¤–ã®ãƒªã‚½ãƒ¼ã‚¹
external:
  - user: ãƒ–ãƒ©ã‚¦ã‚¶
    icon: ğŸ§‘â€ğŸ’»

# VPCãƒªã‚½ãƒ¼ã‚¹
resources:
  - vpc: my-vpc
    cidr: 10.0.0.0/16
    
    # VPCã«ã‚¢ã‚¿ãƒƒãƒã•ã‚Œã‚‹ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ï¼ˆä¸Šé¢ã«é…ç½®ï¼‰
    igw: my-igw
    
    children:
      # ALBï¼ˆã‚µãƒ–ãƒãƒƒãƒˆã®ä¸Šå±¤ã«é…ç½®ï¼‰
      - alb: my-alb
        scheme: internet-facing
        
      # ã‚µãƒ–ãƒãƒƒãƒˆ
      - subnet: public-subnet-1a
        cidr: 10.0.1.0/24
        az: ap-northeast-1a
        type: public
        children:
          - ec2: web-server-1a
            type: t3.micro
            
      - subnet: public-subnet-1c
        cidr: 10.0.2.0/24
        az: ap-northeast-1c
        type: public
        children:
          - ec2: web-server-1c
            type: t3.micro

# æ¥ç¶šç·š
connections:
  - from: ãƒ–ãƒ©ã‚¦ã‚¶
    to: my-igw
    label: "HTTP/HTTPS"
    style: solid
    
  - from: my-igw
    to: my-alb
    label: ""
    style: solid
    
  - from: my-alb
    to: web-server-1a
    label: "port 80"
    style: solid
    
  - from: my-alb
    to: web-server-1c
    label: "port 80"
    style: solid
